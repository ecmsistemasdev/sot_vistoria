    <div class="container mt-4">
        <!-- Logo e título principal -->
        <div class="logo-container">
            <img src="{{ url_for('static', filename='img/logo.png') }}" class="logo-img" alt="SOT Logo">
        </div>
        <h2 class="main-title">SOTWeb - Vistoria de Veículo Oficial</h2>
        <div class="subtitle"><strong>Sistema de Operações de Transporte - TJRO</strong></div> 
        
        <div class="vistoria-header">
            <h3>
                Vistoria #{{ vistoria[0] }}
                {% if vistoria[4] == 'SAIDA' %}
                <span class="badge bg-primary vistoria-tipo">Saída</span>
                {% else %}
                <span class="badge bg-success vistoria-tipo">Devolução</span>
                {% endif %}
                
                {% if vistoria[5] == 'EM_TRANSITO' %}
                <span class="badge bg-warning vistoria-status">Em Trânsito</span>
                {% else %}
                <span class="badge bg-secondary vistoria-status">Finalizada</span>
                {% endif %}
            </h3>
        </div>

        <!-- Informações principais -->
        <div class="row mb-4">
            <div class="col-lg info-field col-md-6 mb-3 mb-lg-0">
                <h5>Motorista</h5>
                <p>{{ vistoria[1] }}</p>
            </div>
            <div class="col-lg info-field col-md-6 mb-3 mb-lg-0">
                <h5>Veículo</h5>
                <p>{{ vistoria[2] }}</p>
            </div>
            <div class="col-lg info-field col-md-6 mb-3 mb-lg-0">
                <h5>Data</h5>
                <p>{{ vistoria[3].strftime('%d/%m/%Y %H:%M') }}</p>
            </div>
            <div class="col-lg info-field col-md-6 mb-3 mb-lg-0">
                <h5>Hodômetro</h5>
                <p>{{ vistoria[11] }}</p>
            </div>
        </div>

        <!-- Fotos da Vistoria Atual -->
        <h5>Fotos da Vistoria</h5>
        <div class="row" id="fotos-container">
            {% for item in itens %}
            <div class="col-md-6 foto-card position-relative">
                <img src="{{ url_for('get_foto', item_id=item.id) }}" class="item-foto" alt="Foto da vistoria" data-index="{{ loop.index0 }}">
                <button class="zoom-button" onclick="openImageModal({{ loop.index0 }}, 'current')">
                    <i class="bi bi-search"></i>
                </button>
            </div>
            {% endfor %}
        </div>

            <!-- Usuário da Vistoria de Saída -->
        <div class="mt-3">
            <h5>Vistoriador</h5>
            <p>{{ vistoria[13] }}</p>
        </div>

        <h5 class="mt-4">Assinaturas da Vistoria de Saída</h5>
        <div class="row">
            <div class="col-md-6 assinatura-card">
                <div class="card">
                    <div class="card-body text-center">
                        <p class="assinatura-titulo">Assinatura Vistoriador</p>
                        {% if vistoria[9] is not none %}
                            <img src="{{ url_for('get_assinatura', tipo='usuario', vistoria_id=vistoria[0]) }}" class="assinatura-img" alt="Assinatura do Usuário">
                        {% else %}
                            <p class="text-muted">Sem assinatura</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-6 assinatura-card">
                <div class="card">
                    <div class="card-body text-center">
                        <p class="assinatura-titulo">Assinatura do Motorista</p>
                        {% if vistoria[10] is not none %}
                            <img src="{{ url_for('get_assinatura', tipo='motorista', vistoria_id=vistoria[0]) }}" class="assinatura-img" alt="Assinatura do Motorista">
                        {% else %}
                            <p class="text-muted">Sem assinatura</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Vistoria de Saída Relacionada -->
        {% if vistoria_saida %}
        <div class="vistoria-relacionada">
            <h5>Vistoria de Saída Relacionada</h5>
            <div class="row">
                <div class="col-md-3">
                    <strong>ID:</strong> {{ vistoria_saida[0] }}
                </div>
                <div class="col-md-3">
                    <strong>Motorista:</strong> {{ vistoria_saida[1] }}
                </div>
                <div class="col-md-3">
                    <strong>Veículo:</strong> {{ vistoria_saida[2] }}
                </div>
                <div class="col-md-3">
                    <strong>Data:</strong> {{ vistoria_saida[3].strftime('%d/%m/%Y %H:%M') }}
                </div>
            </div>

            <h5>Fotos da Vistoria de Saída</h5>
            <div class="row" id="fotos-saida-container">
                {% for item in vistoria_saida_itens %}
                <div class="col-md-6 foto-card position-relative">
                    <img src="{{ url_for('get_foto', item_id=item.id) }}" class="item-foto" alt="Foto da vistoria de saída" data-index="{{ loop.index0 }}">
                    <button class="zoom-button" onclick="openImageModal({{ loop.index0 }}, 'saida')">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
                {% endfor %}
            </div>

            <!-- Usuário da Vistoria de Saída -->
            <div class="mt-3">
                <h5>Vistoriador)</h5>
                <p>{{ vistoria_saida[13] }}</p>
            </div>

            <h4 class="mt-4">Assinaturas da Vistoria de Saída</h4>
            <div class="row">
                <div class="col-md-6 assinatura-card">
                    <div class="card">
                        <div class="card-body text-center">
                            <p class="assinatura-titulo">Assinatura Vistoriador</p>
                            {% if vistoria_saida[9] is not none %}
                                <img src="{{ url_for('get_assinatura', tipo='usuario', vistoria_id=vistoria_saida[0]) }}" class="assinatura-img" alt="Assinatura do Usuário">
                            {% else %}
                                <p class="text-muted">Sem assinatura</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-md-6 assinatura-card">
                    <div class="card">
                        <div class="card-body text-center">
                            <p class="assinatura-titulo">Assinatura do Motorista</p>
                            {% if vistoria_saida[10] is not none %}
                                <img src="{{ url_for('get_assinatura', tipo='motorista', vistoria_id=vistoria_saida[0]) }}" class="assinatura-img" alt="Assinatura do Motorista">
                            {% else %}
                                <p class="text-muted">Sem assinatura</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Observações da Vistoria de Saída -->
        {% if vistoria_saida[12] %}
        <div class="observacoes-card">
            <h5>Observações da Vistoria de Saída</h5>
            <p>{{ vistoria_saida[12] }}</p>
        </div>
        {% endif %}
        {% endif %}

        <!-- Vistoria de Devolução Relacionada -->
        {% if vistoria_devolucao %}
        <div class="vistoria-relacionada">
            <h5>Vistoria de Devolução Relacionada</h5>
            <div class="row">
                <div class="col-md-3">
                    <strong>ID:</strong> {{ vistoria_devolucao[0] }}
                </div>
                <div class="col-md-3">
                    <strong>Motorista:</strong> {{ vistoria_devolucao[1] }}
                </div>
                <div class="col-md-3">
                    <strong>Veículo:</strong> {{ vistoria_devolucao[2] }}
                </div>
                <div class="col-md-3">
                    <strong>Data:</strong> {{ vistoria_devolucao[3].strftime('%d/%m/%Y %H:%M') }}
                </div>
            </div>

            <h5>Fotos da Vistoria de Devolução</h5>
            <div class="row" id="fotos-devolucao-container">
                {% for item in vistoria_devolucao_itens %}
                <div class="col-md-6 foto-card position-relative">
                    <img src="{{ url_for('get_foto', item_id=item.id) }}" class="item-foto" alt="Foto da vistoria de devolução" data-index="{{ loop.index0 }}">
                    <button class="zoom-button" onclick="openImageModal({{ loop.index0 }}, 'devolucao')">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
                {% endfor %}
            </div>

            <!-- Usuário da Vistoria de Devolução -->
            <div class="mt-3">
                <h5>Vistoriador</h5>
                <p>{{ vistoria_devolucao[13] }}</p>
            </div>

            <h5 class="mt-4">Assinaturas da Vistoria de Devolução</h5>
            <div class="row">
                <div class="col-md-6 assinatura-card">
                    <div class="card">
                        <div class="card-body text-center">
                            <p class="assinatura-titulo">Assinatura Vistoriador</p>
                            {% if vistoria_devolucao[9] is not none %}
                                <img src="{{ url_for('get_assinatura', tipo='usuario', vistoria_id=vistoria_devolucao[0]) }}" class="assinatura-img" alt="Assinatura do Usuário">
                            {% else %}
                                <p class="text-muted">Sem assinatura</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-md-6 assinatura-card">
                    <div class="card">
                        <div class="card-body text-center">
                            <p class="assinatura-titulo">Assinatura do Motorista</p>
                            {% if vistoria_devolucao[10] is not none %}
                                <img src="{{ url_for('get_assinatura', tipo='motorista', vistoria_id=vistoria_devolucao[0]) }}" class="assinatura-img" alt="Assinatura do Motorista">
                            {% else %}
                                <p class="text-muted">Sem assinatura</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Observações da Vistoria de Devolução -->
        {% if vistoria_devolucao[12] %}
        <div class="observacoes-card">
            <h5>Observações da Vistoria de Devolução</h5>
            <p>{{ vistoria_devolucao[12] }}</p>
        </div>
        {% endif %}
        {% endif %}

        <!-- Observações da Vistoria Atual -->
        {% if vistoria[12] %}
        <div class="observacoes-card">
            <h5>Observações da Vistoria</h5>
            <p>{{ vistoria[12] }}</p>
        </div>
        {% endif %}

        <!-- Modal de Imagem (resto do código permanece o mesmo) -->
        <div class="modal fade image-modal" id="imageModal" tabindex="-1">
            <!-- Código do modal permanece o mesmo -->
        </div>

        <!-- Rodapé com botões -->
        <div class="fixed-footer">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <a href="/vistorias" class="btn btn-primary">Voltar para Lista</a>
                    <button onclick="imprimirPagina()" class="btn btn-print">
                        <i class="bi bi-printer"></i> Imprimir
                    </button>                    
                </div>
            </div>
        </div>
        <div style="height: 80px;"></div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.bundle.min.js"></script>
    <script>
        const currentImages = {
            'current': Array.from(document.querySelectorAll('#fotos-container img')),
            'saida': document.querySelector('#fotos-saida-container') ? Array.from(document.querySelectorAll('#fotos-saida-container img')) : [],
            'devolucao': document.querySelector('#fotos-devolucao-container') ? Array.from(document.querySelectorAll('#fotos-devolucao-container img')) : []
        };

        const modalImage = document.getElementById('modalImage');
        const imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
        let currentContainer = 'current';
        let currentImageIndex = 0;

        function openImageModal(index, container) {
            currentContainer = container;
            currentImageIndex = index;
            modalImage.src = currentImages[container][index].src;
            imageModal.show();
        }

        function navigateImage(direction) {
            currentImageIndex += direction;
            
            const images = currentImages[currentContainer];
            
            // Circular navigation
            if (currentImageIndex < 0) {
                currentImageIndex = images.length - 1;
            } else if (currentImageIndex >= images.length) {
                currentImageIndex = 0;
            }

            modalImage.src = images[currentImageIndex].src;
        }

        // Fechar modal ao pressionar ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                imageModal.hide();
            }
            
            // Navegação com setas quando o modal está aberto
            if (imageModal._isShown) {
                if (event.key === 'ArrowLeft') {
                    navigateImage(-1);
                } else if (event.key === 'ArrowRight') {
                    navigateImage(1);
                }
            }
        });

        // Função para imprimir a página
        function imprimirPagina() {
            window.print();
        }
    </script>
</body>
</html>
